"use strict";var Core=Core||{};Core.Agent=Core.Agent||{};Core.Agent.Admin=Core.Agent.Admin||{};Core.Agent.Admin.GenericAgent=(function(TargetNS){function AddSelectClearButton(){var $SelectFields=$('select');$SelectFields.each(function(){var Size=parseInt($(this).attr('size'),10),$SelectField=$(this),SelectID=this.id,ButtonHTML='<a href="#" title="'+TargetNS.Localization.RemoveSelection+'" class="GenericAgentClearSelect" data-select="'+SelectID+'"><span>'+TargetNS.Localization.RemoveSelection+'</span><i class="fa fa-undo"></i></a>';if(isNaN(Size)||Size<=1){return false;}
if($SelectField.next('a.ShowTreeSelection').length){$SelectField=$SelectField.next('a.ShowTreeSelection');}
$SelectField.after(ButtonHTML);});$('.GenericAgentClearSelect').on('click.ClearSelect',function(){var SelectID=$(this).data('select'),$SelectField=$('#'+SelectID);if(!$SelectField.length){return false;}
$SelectField.val('');$(this).blur();return false;});}
TargetNS.Localization=undefined;TargetNS.Init=function(Params){TargetNS.Localization=Params.Localization;$('.DeleteEvent').bind('click',function(Event){TargetNS.ShowDeleteEventDialog(Event,$(this));return false;});$('#AddEvent').bind('click',function(){if($('#EventType').val()!==null){TargetNS.AddEvent($('#EventType').val());return;}});$('#EventType').bind('change',function(){TargetNS.ToogleEventSelect($(this).val());});AddSelectClearButton();};TargetNS.ToogleEventSelect=function(SelectedEventType){$('.EventList').addClass('Hidden');$('#'+SelectedEventType+'Event').removeClass('Hidden');};TargetNS.AddEvent=function(EventType){var $Clone=$('.EventRowTemplate').clone(),EventName=$('#'+EventType+'Event').val(),IsDuplicated=false;if(!EventName){return;}
$('[class*=EventValue]').each(function(){if($(this).val()===EventName){IsDuplicated=true;}});if(IsDuplicated){TargetNS.ShowDuplicatedDialog('EventName');return;}
$Clone.find('.EventType').html(EventType);$Clone.find('.EventName').html(EventName);$Clone.find('.EventValue').attr('name','EventValues').val(EventName);$Clone.find('#DeleteEvent').bind('click',function(Event){TargetNS.ShowDeleteEventDialog(Event,$(this));return false;});$Clone.removeClass('Hidden EventRowTemplate');$('#EventsTable > tbody:last').append($Clone);};TargetNS.ShowDeleteEventDialog=function(Event,Object){Core.UI.Dialog.ShowContentDialog($('#DeleteEventDialogContainer'),TargetNS.Localization.DeleteEventMsg,'240px','Center',true,[{Label:TargetNS.Localization.CancelMsg,Class:'Primary',Function:function(){Core.UI.Dialog.CloseDialog($('#DeleteEventDialog'));}},{Label:TargetNS.Localization.DeleteMsg,Function:function(){Object.parents('tr:first').remove();Core.UI.Dialog.CloseDialog($('#DeleteEventDialog'));}}]);Event.stopPropagation();Event.preventDefault();};TargetNS.ShowDuplicatedDialog=function(){Core.UI.Dialog.ShowAlert(TargetNS.Localization.DuplicateEventTitle,TargetNS.Localization.DuplicateEventMsg,function(){Core.UI.Dialog.CloseDialog($('.Alert'));$('#EventType').focus();return false;});};return TargetNS;}(Core.Agent.Admin.GenericAgent||{}));

